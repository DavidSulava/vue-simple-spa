import{_ as l,a as n,b as r,c as i,d as m,e as u,n as c}from"./index.c7d4e80e.js";var d=function(){var s=this,e=s.$createElement,a=s._self._c||e;return a(l,{staticClass:"col-xs-11 col-md-8"},[a(n,{ref:"userCredentials",staticClass:"grey lighten-2 pa-5 rounded elevation-2",on:{submit:function(t){return t.preventDefault(),s.changeUserCredentials.apply(null,arguments)}}},[a(r,{attrs:{name:"email",label:s.elText.labelEmail,required:"",rules:s.emailRules},model:{value:s.formData.email,callback:function(t){s.$set(s.formData,"email",t)},expression:"formData.email"}}),a(r,{attrs:{name:"firstName",label:s.elText.labelName,rules:s.userRules},model:{value:s.formData.firstName,callback:function(t){s.$set(s.formData,"firstName",t)},expression:"formData.firstName"}}),a(r,{attrs:{name:"lastName",label:s.elText.labelLastName,rules:s.userRules},model:{value:s.formData.lastName,callback:function(t){s.$set(s.formData,"lastName",t)},expression:"formData.lastName"}}),a(l,{staticClass:"d-flex justify-center justify-sm-end"},[a(i,{staticClass:"success mt-3",attrs:{type:"submit"}},[s._v(" "+s._s(s.elText.btnChange)+" ")])],1)],1),a(n,{ref:"passChangeForm",staticClass:"grey lighten-2 pa-5 mt-5 rounded elevation-2",on:{submit:function(t){return t.preventDefault(),s.changePassword.apply(null,arguments)}}},[a(r,{staticClass:"mt-15",attrs:{name:"password",label:s.elText.labelOldPassword,required:"",type:"password",rules:s.passRules},model:{value:s.formData.oldPassword,callback:function(t){s.$set(s.formData,"oldPassword",t)},expression:"formData.oldPassword"}}),a(r,{attrs:{name:"new_assword",label:s.elText.labelNewldPassword,required:"",type:"password",rules:s.passRules},model:{value:s.formData.newldPassword,callback:function(t){s.$set(s.formData,"newldPassword",t)},expression:"formData.newldPassword"}}),a(l,{staticClass:"d-flex justify-center justify-sm-end"},[a(i,{staticClass:"success mt-3",attrs:{type:"submit"}},[s._v(" "+s._s(s.elText.btnChange)+" ")])],1)],1),s.user&&!s.user.isVerified?a(n,{staticClass:"grey lighten-2 pa-5 mt-5 rounded elevation-2",on:{submit:function(t){return t.preventDefault(),s.verifyEmail.apply(null,arguments)}}},[a(l,{staticClass:"d-flex justify-center"},[a(i,{staticClass:"success mt-3",attrs:{type:"submit"}},[s._v(" "+s._s(s.elText.btnVerify)+" ")])],1)],1):s._e(),a(m,{staticClass:"snackBar",attrs:{absolute:!0,timeout:s.snackbar.timeout,top:"top",color:s.snackbar.color},model:{value:s.snackbar.show,callback:function(t){s.$set(s.snackbar,"show",t)},expression:"snackbar.show"}},[s._v(" "+s._s(s.snackbar.snackText)+" ")])],1)},p=[];const f={name:"RedactProfile",data(){return{passMax:50,minPassLen:8,allowSpaces:!1,notChangeableEmail:"admin@gmail.com",elText:{btnChange:"Change",btnVerify:"Confirm email",labelName:"name",labelLastName:"surname",labelEmail:"* email",labelOldPassword:"* old password",labelNewldPassword:"* new password"},formData:{firstName:"",lastName:"",email:"",oldPassword:"",newldPassword:""},info:{demoDataError:"demo account data can`t be changed",inputError:"field cannot be empty",emailNotValid:"invalid email!",inputMaxChars:"field cannot be greater",inputErrorSpases:"field cannot contain spaces",passworError:["password must not contain spaces","password cannot be greater","password must contain at least","password mismatch"]},snackbar:{show:!1,timeout:3e3,snackText:"",color:"success"},path:["/users/updateUser","/users/newPassword","/users/email/sendVerification?"]}},computed:{...u(["user","msgServer"]),passRules(){const s=[];if(this.passMax){const e=a=>(a||"").length<=this.passMax||`${this.info.passworError[1]} ${this.minPassLen} \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432`;s.push(e)}if(!this.allowSpaces){const e=a=>(a||"").indexOf(" ")<0||this.info.passworError[0];s.push(e)}if(this.minPassLen){const e=a=>(a||"").length>=this.minPassLen||`${this.info.passworError[2]} ${this.minPassLen} \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432`;s.push(e)}return s.push(()=>this.formData.email!==this.notChangeableEmail||this.info.demoDataError),s},emailRules(){return[e=>!!e||this.info.inputError,e=>/.+@.+\..+/.test(e)||this.info.emailNotValid,e=>e!==this.notChangeableEmail||this.info.demoDataError]},userRules(){return[e=>(e||"").length<=this.passMax||`${this.info.inputMaxChars} ${this.passMax} \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432`,e=>(e||"").indexOf(" ")<0||this.info.inputErrorSpases]}},watch:{msgServer(s){let e=s.userUpdated||s.passUpdated||s.verLinkSend,a=s&&s.erPassword?s.erPassword:null;s&&e?(this.snackbar.color="success",this.snackbar.show=!0,this.snackbar.snackText=e):s&&a?(this.snackbar.color="error",this.snackbar.show=!0,this.snackbar.snackText=a):s&&s.emailErr&&(this.snackbar.color="error",this.snackbar.show=!0,this.snackbar.snackText=s.emailErr)},user(s){s||this.$router.push({path:"/"}),this.formData={...this.formData,...s}}},created(){this.setFields()},methods:{changeUserCredentials(){if(!this.$refs.userCredentials.validate())return;let s=new FormData(this.$refs.userCredentials.$el);this.$store.dispatch("loginAction",{path:this.path[0],form:s})},changePassword(){if(!this.$refs.passChangeForm.validate())return;let s=new FormData(this.$refs.passChangeForm.$el);this.$store.dispatch("loginAction",{path:this.path[1],form:s})},verifyEmail(){this.$store.dispatch("emailVerifyAction",{path:this.path[2]+`email=${this.user.email}`})},setFields(){this.formData={...this.formData,...this.user}}}},o={};var h=c(f,d,p,!1,b,null,null,null);function b(s){for(let e in o)this[e]=o[e]}const w=function(){return h.exports}();export{w as default};
